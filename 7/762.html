<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      This Amos Professional Manual is written by asymetrix for the Amiga community and should stay completly FREE FOREVER.
      Created 2008. :)
  -->
  <title>Amos Professional Manual - AMAL</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="Amos Professional, Amiga, Programming, Basic, Francois Lionet, Europress Software Ltd, Amos, computing, code, AmigaDOS">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">

<a href="../index.html">Amos Professional Manual</a>&nbsp; <a href="../contents/c1.html">Contents</a>&nbsp; <a href="../14/1446.html">Index</a> 

<h1>AMAL</h1>

<br>

<p>
can be changed when CHANNEL is used in conjunction with SCREEN SIZE. When the channel
number is assigned TO a screen number in this way, registers A and Y will control the width
and height of the screen. Here is an example:</p>

<pre>
E> Load Iff "AMOSPro Examples:Iff/Logo.Iff",0
   Channel 0 To Screen Size 0
   Screen Display 0,320,1 : Rem Set screen size to 1
   A$="Loop: For R0=0 To 255; Let Y=R0; Next R0;"
   A$=A$+"For R0=0 To 254; Let Y=255-R0; Next R0 ; J Loop"
   Amal 0,A$ : Amal On: Direct
</pre>

<p><b>Creating rainbow effects</b><br>

The final use of CHANNEL is with the RAINBOW command. As usual, a channel number
between 0 and 63 is assigned to a rainbow number. Please remember that rainbow numbers
range from 0 to 3. The X register will now hold the first colour of the rainbow palette which is to
be displayed, and by changing the value in this register the rainbow will appear to cycle. The Y
register will contain the line on screen where the rainbow effect begins. By changing this value,
the rainbow effect can be moved up and down. All positions are measured in hardware
coordinates. Finally, register A stores the height of the rainbow on screen. Remind yourself of
the scrolling rainbow effect in this instant example:</p>

<pre>
LD> Load "AMOSPro_Tutorial:Tutorials/AMAL/AMAL_4.AMOS"
</pre>

<p><b>The Autotest system</b><br>

Normally, all AMAL programs are performed in sequence, from start to finish. There are certain
routines that will take a few seconds to complete, such as a For ... Next loop or a Move. In most
cases this does not cause any problem, but sometimes delays can be caused. The Autotest feature
is provided to solve such problems, and it is used to change the sequence of instructions.</p>

<p>
The following example demonstrates just such a problem, which could benefit from an
Autotest. In this example, the Sprite is supposed to follow the movements of the mouse.
However, because the new XM and YM movements are entered after the Sprite movement has
completely finished, the routine is unacceptably slow. Try moving the mouse in a circle, to
exaggerate the problem:</p>

<pre>
E> Load "AMOSPro_Tutorial:Objects/Sprites.abk" : Get Sprite Palette
   Sprite 8,130,50,1
   Amal 8,"Loop: Let R0=XM-X ; Let R1=YM-Y ; Move R0,R1,50 ; Jump Loop"
   Amal On: Direct
</pre>

<p>
After an explanation of the Autotest commands, and an explanation of how to use them, you
will be able to rewrite that example and solve the problem.</p>

<p><b>AUTOTEST</b><br>
<i>AMAL Autotest system</i><br>
<b>AU</b>totest (list of test commands)</p>

<p>
The feature is activated by a call to AUtotest, followed by a pair of brackets
containing the series of the tests you want to use.</p>

<div align="right"> <a href="761.html">Back</a> &nbsp;&nbsp;
  <a href="763.html">Next</a>
  <br>
  07.06.15
</div>

</BODY>
</HTML>
