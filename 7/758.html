<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      This Amos Professional Manual is written by asymetrix for the Amiga community and should stay completly FREE FOREVER.
      Created 2008. :)
  -->
  <title>Amos Professional Manual - AMAL</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="Amos Professional, Amiga, Programming, Basic, Francois Lionet, Europress Software Ltd, Amos, computing, code, AmigaDOS">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">

<a href="../index.html">Amos Professional Manual</a>&nbsp; <a href="../contents/c1.html">Contents</a>&nbsp; <a href="../14/1446.html">Index</a> 

<h1>AMAL</h1>

<br>

<p>
A logical AND operation is performed between this bit-mask and the random number to
generate the final result, so setting the bit-mask to a value of 255 would return numbers in the
range 0 to 255.</p>

<p>
To optimise speed, the number returned is not truly random, and if true random numbers are
needed, they may be generated by the Basic instruction RND and then loaded into an external
AMAL register using AMREG.</p>

<p>There is a tutorial available on the AMAL functions in the following file:</p>

<pre>
LD> Load "AMOSPro Tutorial:Tutorials/AMAL/AMAL_3.AMOS"
</pre>

<p><b>Calling an AMAL program from AMOS Professional</b></p>

<p><b>AMAL</b><br>
<i>instruction: call an AMAL program</i><br>
<b>Amal</b> channel number,"instruction string"<br>
<b>Amal</b> channel number,program number<br>
<b>Amal</b> channel number,memory bank address<br>
<b>Amal</b> channel number,"instruction string" <b>To</b> address</p>

<p>
The AMAL command is used to assign an AMAL program to an animation channel. This
program can be taken from an instruction string, or it may be taken directly from the AMAL
memory bank. In either case, the AMAL instruction is followed by the channel number to be
assigned, ranging from 0 to 63.</p>

<p>Each channel can be independently assigned to a Sprite, or a Bob, or a screen.</p>

<p>
Only the first 16 AMAL programs, assigned to channels 0 to 15, can be performed using
interrupts. Channels 16 to 63 must be executed directly from Basic using the SYNCHRO
command, which is explained elsewhere in this Chapter.</p>

<p>
There is also a version of the AMAL command provided for advanced users. In this version, the
contents of registers X,Y and A are copied into a specific area of memory. This information can
then be used in AMOS Professional Basic routines, which means that AMAL can be exploited to
animate anything from an individual character, to a graphical block. The format used by this
technique is as follows:</p>

<pre>
X> <b>Amal</b> channel number,A$ <b>To</b> address
</pre>

<p>
The address must be <b>even</b>, and point to a safe memory location, preferably in an AMOS
Professional string, or memory bank. The AMAL program is executed every 50th of a second,
and the following values will be written into the specified memory area:</p>

<pre>
<b>Location   Effect</b>
Address    Bit 0 This is set to 1 if X register has changed
           Bit 1 This indicates that Y register has changed
           Bit 2 This is set if image (A) has changed since last interrupt
Address+2  This is a word containing the latest value of X
Address+4  Holds the current value of Y
Address+6  Stores the value of A
 </pre>
                                                                      
<div align="right"> <a href="757.html">Back</a> &nbsp;&nbsp;
  <a href="759.html">Next</a>
  <br>
  07.06.11
</div>

</BODY>
</HTML>
