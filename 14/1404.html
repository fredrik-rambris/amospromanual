<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      This Amos Professional Manual is written by asymetrix for the Amiga community and should stay completly FREE FOREVER.
      Created 2008. :)
  -->
  <title>Amos Professional Manual - Machine Code</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="Amos Professional, Amiga, Programming, Basic, Francois Lionet, Europress Software Ltd, Amos, computing, code, AmigaDOS">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">

<a href="../index.html">Amos Professional Manual</a>&nbsp; <a href="../contents/c1.html">Contents</a>&nbsp; <a href="../14/1446.html">Index</a>

<h1>Machine Code</h1>

<br>

<p><b>DEEK</b><br>
<i>function: read two bytes from an even address</i><br>
word=<b>Deek</b>(address)</p>

<p>
DEEK reads a two-byte "word" at a specified address. This address must be even, or an address
error will be generated.</p>

<p><b>DOKE</b><br>
<i>instruction: change a two-byte word at an even address</i><br>
<b>Doke</b> address,number</p>

<p>
Use the DOKE command to copy a two-byte number between 0 and 65535 into the memory
location at a specified even address. Only DOKE into places where you are certain of safety,
because indiscriminate use of this command will almost certainly crash your Amiga!</p>

<p><b>LEEK</b><br>
<i>function: read four bytes from an even address</i><br>
word=<b>Leek</b>(address)</p>

<p>
The LEEK function returns a four-byte "long word" stored at the specified even address. The
result will be in exactly the same format as a standard AMOS Professional integer. This may
result in negative values being returned in certain circumstances, such as if bit 31 of your
number is set to 1. The correct value can be calculated by making use of DEEK, then loading the
result into a floating point number, like this:</p>

<pre>
E> A=$FFFFFFFE
   Print Leek(Varptr(A))
   A#=Deek(Varptr(A))*65535.0+Deek(Varptr(A)+2)
   Print A#
</pre>

<p><b>LOKE</b><br>
<i>instruction: change a four-byte word at an even address</i><br>
<b>Loke</b> address,number</p>

<p>
LOKE copies a four-byte number into the memory location at a specified address. As before, the
address must be an even location, and this command must be used with the greatest of care to
avoid crashing the computer.</p>

<p><b>POKE$</b><br>
<i>instruction: poke a string of characters into memory</i><br>
<b>Poke$</b> address, string$</p>

<p>
Use the POKE$ command to take a source string and copy it directly to a chosen memory
location, one character at a time. The address parameter holds the address of the first byte to be
loaded with the new string data.</p>

<div align="right"> <a href="1403.html">Back</a> &nbsp;&nbsp;
  <a href="1405.html">Next</a>
  <br>
  14.A.04
</div>

</BODY>
</HTML>
