<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      This Amos Professional Manual is written by asymetrix for the Amiga community and should stay completly FREE FOREVER.
      Created 2008. :)
  -->
  <title>Amos Professional Manual - Machine Code</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="Amos Professional, Amiga, Programming, Basic, Francois Lionet, Europress Software Ltd, Amos, computing, code, AmigaDOS">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">

<a href="../index.html">Amos Professional Manual</a>&nbsp; <a href="../contents/c1.html">Contents</a>&nbsp; <a href="../14/1446.html">Index</a>

<h1>Machine Code</h1>

<br>

<p>
<b>Integers</b>. The parameter holds a long word, containing a normal AMOS Professional number. It
can be grabbed with a line such as this:</p>

<pre>
Move.l (a3)+,d0
</pre>

<p>
<b>Single precision numbers</b>. These are stored in Fast Floating Point format, and are held in one
long word. To load such a number into register d0, use the following:</p>

<pre>
Move.l (a3)+,d0
</pre>

<p>
<b>Double precision numbers</b>. These are stored in IEEE double precision format, and are held as
two long words. To load a double precision variable into registers d0 and dl, you could use this:</p>

<pre>
Move.l (a3)+,d0   * Top half 
Move.l (a3)+,d1   * Bottom half
</pre>

<p>
<b>Strings</b>. The stack contains the Address of the string in memory. All strings begin with a single
word that holds their length. For example:</p>

<pre>
; Grab the string. Each string is stored at an EVEN address,
; starting with the length of the string, and then the string itself

Move.l (a3)+,a2    * Address of the string
Move.w (a2)+,d2    * Length of the string
</pre>

<p><b>AREG</b><br>
<i>reserved variable: pass values to and from 68000 address register</i><br>
a=<b>Areg</b>(number)<br>
<b>Areg</b>(number)=a</p>

<p>
AREG is a special array which is used to pass values to and from any of the 68000 processor's
address registers. Specify the number of the register from 0 to 6, selected from either of the
following two groups:</p>

<p>
<b>A0, Al, A2</b>. These registers can be read from AMOS Professional Basic, and changed at will.
Whenever a machine code program is run, any new values will be transferred straight into the
relevant address register. For example:</p>

<pre>
X> Areg(0)=Varptr(A$) : Rem Load the address of A$ into A0
   Areg(1)=Varptr(B(0,0)) : Rem Load the address of B(0,0) into Al
</pre>

<p>
<b>A3, A4, A5, A6</b>. These are read-only registers. Any attempt to change their current contents will
generate an "illegal function call" error message.</p>

<p><b>DREG</b><br>
<i>reserved variable: pass value into 68000 data register</i><br>
d=<b>Dreg</b>(number)<br>
<b>Dreg</b>(number)=d</p>

<p>
DREG can be used to move values back and forth between AMOS Professional
Basic and the 68000's Data registers, by specifying the number of
a data register from 0 to 7.</p>

<div align="right"> <a href="1414.html">Back</a> &nbsp;&nbsp;
  <a href="1416.html">Next</a>
  <br>
  14.A.15
</div>

</BODY>
</HTML>
