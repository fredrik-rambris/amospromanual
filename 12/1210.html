<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      This Amos Professional Manual is written by asymetrix for the Amiga community and should stay completly FREE FOREVER.
      Created 2008. :)
  -->
  <title>Amos Professional Manual - Error Handling</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="Amos Professional, Amiga, Programming, Basic, Francois Lionet, Europress Software Ltd, Amos, computing, code, AmigaDOS">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">

<a href="../index.html">Amos Professional Manual</a>&nbsp; <a href="../contents/c1.html">Contents</a>&nbsp; <a href="../14/1446.html">Index</a>

<h1>Error Handling</h1>

<br>

<p>
<b>TRAP</b><br>
<i>instruction: trap an error</i><br>
<b>Trap</b> instruction</p>

<p>
The TRAP command offers a much sleeker error-trapping service than an ON ERROR GOTO
structure, and it is used to detect errors for a particular instruction. The TRAP instruction is used
before any normal AMOS Professional instruction with no colon between them, and it disables
the error system for the specified instruction. This means that if an error occurs, the program
will not be halted, but the number of the error will be reported instead. This number can then be
returned by the ERRTRAP function, explained below. Here is an example of trapping a disc
access error:</p>

<pre>
E> Trap Load "File.Abk",10
   If Errtrap : Print "Disc Error!" : End If
</pre>

<p>
TRAP will only detect an error for the instruction that immediately follows, so in the next
example the second usage of the LOCATE instruction <b>will</b> cause an error!</p>

<pre>
E> Trap Locate -1,-1 : Locate -1,-1
</pre>

<p>
<b>ERRTRAP</b><br>
<i>function: return an error code number after a TRAP</i><br>
number=<b>Errtrap</b></p>

<p>
This function is used to return the error status after a previous TRAP command. If no error has
been detected, a zero is returned, otherwise the appropriate error number is given. The related
error message can then be returned using the ERR$ function, explained next.</p>

<p>
<b>ERR$</b><br>
<i>function: return an error message string</i><br>
text$=<b>Err$</b>(error number)</p>

<p>
This simple function returns an error message string. If the error number is out of range, then an
empty string will be given. ERR$ will return error messages as long as they are loaded in
memory, but messages will not be returned from a compiled program, or if the Editor has been
KILLed.</p>

<div align="right"> <a href="1209.html">Back</a> &nbsp;&nbsp;
  <a href="1211.html">Next</a>
  <br>
  12.02.04
</div>

</BODY>
</HTML>
