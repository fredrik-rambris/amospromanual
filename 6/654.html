<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      This Amos Professional Manual is written by asymetrix for the Amiga community and should stay completly FREE FOREVER.
      Created 2008. :)
  -->
  <title>Amos Professional Manual - Menus</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="Amos Professional, Amiga, Programming, Basic, Francois Lionet, Europress Software Ltd, Amos, computing, code, AmigaDOS">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">

<a href="../index.html">Amos Professional Manual</a>&nbsp; <a href="../contents/c1.html">Contents</a>&nbsp; <a href="../14/1446.html">Index</a> 

<h1>Menus</h1>

<br>

<p>Here is the general structure of a menu procedure:</p>

<pre>
X> Procedure ITEM
    If DREG(2)
       X=DREG(0) : Y=DREG(1)
       drawing instructions go here
    Endif
    DREG(0)=BX : Rem x coord of bottom right corner of menu item
    DREG(1)=BY : Rem y coord of bottom right corner of menu item
   Endproc
</pre>

<p>
The dimensions of the menu item as it is displayed on screen are set using the coordinates BX
and BY. These must be loaded into registers DREG(0) and DREG(1) before leaving your
procedure because they are needed to create the final menu bar.</p>

<p>
While inside your procedure, most AMOS Professional instructions can be performed, including
other procedures. However, the following rules must be observed to avoid your Amiga crashing!</p>

<ul>
  <li>Never change the current screen inside a menu.</li>
  <li>Do not set or re-set a screen zone.</li>
  <li>Avoid instructions that halt the action of your program (WAIT, INPUT, INKEY$, etc)</li>
  <li>All disc operations are absolutely forbidden.</li>
  <li>Errors will bypass any error trapping in the procedure, and the program will return to
      the editor after closing the procedure.</li>
</ul>

<p><b>RESERVE</b><br>
<i>embedded command: reserve a local data area for a procedure</i><br>
<b>RE</b>serve number of bytes</p>

<p>
REserve allocates the chosen number of bytes of memory for a menu item. This area can then be
accessed from within your menu procedure using the address held in AREG(1). The data area
that is reserved in this way is for the storage of variables. This area is local to the menu item that
calls the procedure.</p>

<p><b>Automatic re-drawing of menus</b><br>

The last two commands in this Chapter affect the automatic process which re-draws the selected
menu 50 times every second.</p>

<p><b>MENU CALLED</b><br>
<i>instruction: re-draw a menu item continually</i><br>
<b>Menu Called</b>(single item parameters)</p>

<p>
MENU CALLED engages the automatic re-drawing process. This command is normally used
with a menu procedure to generate animated menu items, often with spectacular moving
graphic effects.</p>

<div align="right"> <a href="653.html">Back</a> &nbsp;&nbsp;
  <a href="655.html">Next</a>
  <br>
  06.05.17
</div>

</BODY>
</HTML>
