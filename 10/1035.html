<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      This Amos Professional Manual is written by asymetrix for the Amiga community and should stay completly FREE FOREVER.
      Created 2008. :)
  -->
  <title>Amos Professional Manual - Accessing a Serial Port</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="Amos Professional, Amiga, Programming, Basic, Francois Lionet, Europress Software Ltd, Amos, computing, code, AmigaDOS">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">

<a href="../index.html">Amos Professional Manual</a>&nbsp; <a href="../contents/c1.html">Contents</a>&nbsp; <a href="../14/1446.html">Index</a>

<h1>Accessing a Serial Port</h1>

<br>

<p>
<b>SERIAL INPUT$</b><br>
<i>function: get a string from the Serial Port</i><br>
string=<b>Serial Input$</b>(Channel number)</p>

<p>
This function is used to read an entire string of characters from the Serial Port. If no data is
available an empty string will be returned, otherwise the string will contain all the bytes that
have been transmitted via the serial line up to the present moment.</p>

<p>
Care should be taken when using this function with high speed transfers, such as those from
MIDI devices. If the waiting time between each receive is too long, the system may overload and
generate errors such as "string too long" or "serial device buffer overrun".</p>

<p>
Transmitting a very large string can take a long time, especially at low Baud rates. With AMOS
Professional multi-tasking, a program will only continue after a SERIAL SEND instruction. To
avoid corrupting data, the following system should be employed:</p>

<ul>
  <li>Use the SERIAL CHECK function before using lengthy strings.</li>
  <li>Perform a "garbage collection" using X =FREE, to ensure that the program will not provoke
      such an operation spontaneously.</li>
  <li>Use the SERIAL OUT command and set the address parameter to contain the location of a
      memory bank that has been previously reserved.</li>
</ul>

<p><b>Other Serial commands</b></p>

<p>
<b>SERIAL BUF</b><br>
<i>instruction: set the size of the serial buffer</i><br>
<b>Serial Buffer</b> Channel number,length</p>

<p>
This allocates the length of the buffer space for the required channel, specified in the number of
bytes to be allocated. The minimum allocation is 64 bytes, and the default setting is 512 bytes.
You are recommended to increase the buffersize for high speed transfers of data.</p>

<p>
<b>SERIAL FAST</b><br>
<i>instruction: engage fast mode for data transfer</i><br>
<b>Serial Fast</b> Channel number</p>

<p>
Use this command to set a special "fast" flag in the current serial device, which disables much of
the internal checking process that can slow down the communication process. This is
recommended for high speed transfers. Please note that when SERIAL FAST is called, the
protocol is changed to: even parity, no XON/XOFF and 8 bits.</p>

<p>
<b>SERIAL SLOW</b><br>
<i>instruction: re-set slow mode for data transfer</i><br>
<b>Serial Slow</b> Channel number</p>

<p>
This instruction slows the serial device transmission back to normal speed, and all of the internal
error checks are enabled once more.</p>

<div align="right"> <a href="1034.html">Back</a> &nbsp;&nbsp;
  <a href="1036.html">Next</a>
  <br>
  10.04.04
</div>

</BODY>
</HTML>
