<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      This Amos Professional Manual is written by asymetrix for the Amiga community and should stay completly FREE FOREVER.
      Created 2008. :)
  -->
  <title>Amos Professional Manual - Libraries and Devices</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="Amos Professional, Amiga, Programming, Basic, Francois Lionet, Europress Software Ltd, Amos, computing, code, AmigaDOS">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">

<a href="../index.html">Amos Professional Manual</a>&nbsp; <a href="../contents/c1.html">Contents</a>&nbsp; <a href="../14/1446.html">Index</a>

<h1>Libraries and Devices</h1>

<br>

<p>
<b>LVO</b><br>
<i>function: get the Library Vector Offset</i><br>
offset=<b>Lvo</b>("Name_of_the_function")</p>

<p>
This function returns the Library Vector Offset associated with a specified function. The
function name will be translated automatically when your program is tested for the first time,
and it will be placed in a memory bank for future use. Set up the memory bank with a SET
EQUATE BANK command first, otherwise an error message will be generated. If the function
name does not exist, an "Equate not found error" will be given from the Editor.</p>

<p>
The function name is in standard Commodore format, and should be typed in <b>exactly</b> as it
appears in your reference manuals. This is especially important regarding the way upper case
letters are treated differently from their lower case equivalents. For example, Input, INPUT and
input are separate keywords, only the first version will be accepted, and either of the
alternatives will generate an error when the program is tested!</p>

<p>
Also note that because the function is executed during the testing process, it <b>must</b> be a simple
string rather than an expression. For example, if you need to call the FindTask option from Exec,
you would use a line like this:</p>

<pre>
X> TASK=Execall(Lvo("FindTask"))
</pre>

<p>
<b>EQU</b><br>
<i>function: get an equate</i><br>
value=<b>Equ</b>("Name_of_the_equate")</p>

<p>
The EQU function returns any standard equate value used by the Amiga system libraries. The
equate can represent anything from an offset to a structure, or even the names of various bit-
masks. Provided that it is supplied in the standard Amiga include files, it will be available from
AMOS Professional immediately. The only exceptions to this rule are the library offsets, and
these should be obtained with the LVO function.</p>

<p>
The name of the equate should be specified in brackets, and refers to the name as set out in your
reference manuals. This name is case sensitive, as explained above, so care should be taken. It is
also important to remember that the name string <b>must</b> be a constant, and that expressions are
not allowed! In fact, the technique is extremely simple. This example would send a WRITE
command to a device:</p>

<pre>
X> DEV D0(channel,EQU("CMD_WRITE"))
</pre>

<p>
<b>STRUC</b><br>
<i>reserved variable: access an internal data structure</i><br>
value=<b>Struc</b>(address,"Offset Name")<br>
<b>Struc</b>(address,"Offset_Name")=value</p>

<p>
The STRUC reserved variable provides a simple way of assigning a value to any one of the
elements of a system structure, and it is intelligent!</p>

<div align="right"> <a href="1116.html">Back</a> &nbsp;&nbsp;
  <a href="1118.html">Next</a>
  <br>
  11.05.04
</div>

</BODY>
</HTML>
